{"version":3,"sources":[null,"webpack:////Users/meishijian/Desktop/uniapp/m-down/uni_modules/msj-down/components/msj-down/msj-down.vue?e5e4","webpack:////Users/meishijian/Desktop/uniapp/m-down/uni_modules/msj-down/components/msj-down/msj-down.vue?b182","webpack:////Users/meishijian/Desktop/uniapp/m-down/uni_modules/msj-down/components/msj-down/msj-down.vue?8815","uni-app:///uni_modules/msj-down/components/msj-down/msj-down.vue","webpack:////Users/meishijian/Desktop/uniapp/m-down/uni_modules/msj-down/components/msj-down/msj-down.vue?6b36","webpack:////Users/meishijian/Desktop/uniapp/m-down/uni_modules/msj-down/components/msj-down/msj-down.vue?de70"],"names":["name","components","down","MsjFilter","mixins","props","menuList","type","default","themeColor","textColor","fixedTop","duration","height","border","isGrow","isBtn","fontSize","filters","data","createMargin","currentIndex","popupName","isShow","isVisible","menuItem","isFixedTopBall","marginFix","resetMenu","newMenuCopy","isNewMenu","computed","getMenuList","label","value","newMenu","item","filterItem","downStyle","watch","mounted","created","methods","marginTopHanld","select","boundingClientRect","exec","menuClick","confirm","JSON","console","handleResetting","handlePopupShow","handlePopupHide","setTimeout","downSuccess","itemList","itemIndex","index","changeItem","menuIndex"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiI;AACjI;AAC4D;AACL;AACsC;;;AAG7F;AACsN;AACtN,gBAAgB,iNAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,+FAAM;AACR,EAAE,wGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjBA;AAAA;AAAA;AAAA;AAAo2B,CAAgB,syBAAG,EAAC,C;;;;;;;;;;;;;;;;;;ACwKx3B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBAGA;EACAA;EACAC;IAAAC;IAAAC;EAAA;EACAC;EACAC;IACA;AACA;AACA;IACAC;MACAC;MACAC;QAAA;MAAA;IACA;IACA;AACA;AACA;IACAC;MACAF;MACAC;IACA;IACA;AACA;AACA;IACAE;MACAH;MACAC;IACA;IACA;AACA;AACA;IACAG;MACAJ;MACAC;IACA;IACA;AACA;AACA;IACAI;MACAL;MACAC;IACA;IACA;AACA;AACA;IACAK;MACAN;MACAC;IACA;IACA;AACA;AACA;IACAM;MACAP;MACAC;IACA;IACA;AACA;AACA;IACAO;MACAR;MACAC;IACA;IACA;AACA;AACA;IACAQ;MACAT;MACAC;IACA;IACA;AACA;AACA;IACAS;MACAV;MACAC;IACA;EACA;EACAU;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;;EACAC;IACAC;MACA;QACAC;QACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;;MAEAC;QACA;UACA;YACAC;UACA;QACA;UACA;UACA;YACA;cACAA;YACA;YACA;YACA;cACAA;YACA;YACA;cACAA;YACA;UACA;QACA;UACA;UACA;YACA;cACAA;YACA;YACA;YACA;cACAA;YACA;YACAA;cACA;gBACAC;cACA;YACA;UACA;QACA;QACA;MACA;;MACA;MACA;MACA;IACA;IACA;AACA;AACA;IACAC;MACA;MACA,+CACA,0DACA,6DACA,iEACA,iEACA,kEACA,0DACA;IAEA;EACA;EACAC;EACAC;EACAC;EACAC;IACA;AACA;AACA;IACAC;MAAA;MACA;QACA;QACAC,OACAA,0BACAC;UACA;UACA;UACA;YACA;YACA;UACA;QACA,GACAC;QACA;UACAF,OACAA,0BACAC;YACA;YACA;YACA;cACA;cACA;YACA;UACA,GACAC;QACA;UACAF,OACAA,qCACAC;YACA;YACA;YACA;cACA;cACA;YACA;UACA,GACAC;QACA;QAEA;MACA;IACA;IACA;AACA;AACA;IACAC;MACA;MACA;MACA;QACA;QACA;QACA;MACA;QACA;QACA;QACAX;QACA;QACA;QACA;MACA;QACA;QACA;QACA;UACA;UACA;QACA;UACA;UACA;QACA;QACA;QACA;MACA;QACA;UACA;UACA;QACA;UACA;UACA;QACA;QACA;UACAA;QACA;MACA;MACA;MACA;IACA;IAEA;AACA;AACA;IACAY;MACA,iDACAC,oDACA;MACA;MACA;MAEA;MACA;QACA;QACA;UACA9B;QACA;QAEA+B;QACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MACA;MACA,iDACAF,8CACA;MACA;QACA,iDACAA,oDACA;QACA;MACA;MACA;IACA;IACA;AACA;AACA;AACA;IACAG;MACA;MACA;MACA;MACA;MACA;IACA;IACA;AACA;AACA;IACAC;MAAA;MACA;MACA;;MAEA;MACAC,WACA;QACA;UACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA,GACA,wDACA;MACA;IACA;IACA;AACA;AACA;AACA;AACA;AACA;AACA;IACAC;MACA;MACAC;MACA;MACA;MACA;MACA,WACApB,kCACAF,OACAE,MACAqB,WACAC,MACA;MACA;IACA;IACA;AACA;AACA;AACA;AACA;AACA;IACAC;MACAT,YACA,sEACAd,MACAsB,OACAE,UACA;MACA;IACA;EACA;AACA;AAAA,4B;;;;;;;;;;;;;AChiBA;AAAA;AAAA;AAAA;AAAmnD,CAAgB,67CAAG,EAAC,C;;;;;;;;;;;ACAvoD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"uni_modules/msj-down/components/msj-down/msj-down.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./msj-down.vue?vue&type=template&id=23f1f265&scoped=true&\"\nvar renderjs\nimport script from \"./msj-down.vue?vue&type=script&lang=js&\"\nexport * from \"./msj-down.vue?vue&type=script&lang=js&\"\nimport style0 from \"./msj-down.vue?vue&type=style&index=0&id=23f1f265&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"23f1f265\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/msj-down/components/msj-down/msj-down.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./msj-down.vue?vue&type=template&id=23f1f265&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.getMenuList.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./msj-down.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./msj-down.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"msj-down\" :style=\"downStyle\">\n    <div class=\"msj-down-header\">\n      <!-- 头部 -->\n      <slot name=\"header\" v-if=\"!fixedTop\"></slot>\n      <div\n        :class=\"[\n          'down',\n          fixedTop ? 'is-fixed' : isFixedTopBall ? 'is-fixed' : ''\n        ]\"\n      >\n        <slot name=\"header\" v-if=\"fixedTop\"></slot>\n        <!-- 菜单 -->\n        <div class=\"down-menu\">\n          <div\n            class=\"down-menu-item\"\n            :class=\"[\n              isGrow ? '' : 'each',\n              border ? 'border' : '',\n              item.class ? 'down-menu-' + item.class : '',\n              getMenuList.length > 1 ? 'justify-center' : '',\n              currentIndex === index ? 'is-actived' : ''\n            ]\"\n            v-for=\"(item, index) in getMenuList\"\n            :key=\"index\"\n            @click=\"menuClick(item, index)\"\n          >\n            <div class=\"down-menu-item-click\" v-if=\"item.type === 'click'\">\n              <slot :name=\"item.slot\" v-if=\"item.slot\"> </slot>\n              <template v-else>\n                <text> {{ item.title }}</text>\n                <slot v-if=\"item.slotIcon\" :name=\"item.slotIcon\"></slot>\n                <i v-else-if=\"item.icon\" :class=\"['click-icon', item.icon]\"></i>\n              </template>\n            </div>\n            <div\n              v-else-if=\"item.type === 'sort'\"\n              class=\"down-menu-item-sort flex items-center\"\n            >\n              <slot :name=\"item.slot\" v-if=\"item.slot\"> </slot>\n              <template v-else>\n                <text> {{ item.title }}</text>\n                <div\n                  class=\"sort-icon flex flex-col\"\n                  :class=\"[\n                    item.value === 'asc'\n                      ? 'is-actived-sort-icon-up'\n                      : 'is-actived-sort-icon-down'\n                  ]\"\n                >\n                  <i class=\"iconfont up-fill\" name=\"arrow-up-fill\">\n                    &#xeb6e;\n                  </i>\n                  <i class=\"iconfont down-fill\" name=\"arrow-down-fill\">\n                    &#xeb6d;\n                  </i>\n                </div>\n              </template>\n            </div>\n            <div class=\"down-menu-item-down\" v-else-if=\"item.type === 'down'\">\n              <slot :name=\"item.slot\" v-if=\"item.slot\"> </slot>\n              <template v-else>\n                <text> {{ item.title }}</text>\n                <i v-if=\"item.icon\" :class=\"['down-icon', item.icon]\"></i>\n                <div v-else class=\"down-icon\">\n                  <i class=\"iconfont up-fill\" v-if=\"currentIndex === index\">\n                    &#xeb6f;\n                  </i>\n                  <i class=\"iconfont\" v-else> &#xeb70; </i>\n                </div>\n              </template>\n            </div>\n            <div\n              class=\"down-menu-item-filter\"\n              v-else-if=\"item.type === 'filter'\"\n            >\n              <slot :name=\"item.slot\" v-if=\"item.slot\"> </slot>\n              <template v-else>\n                <text> {{ item.title }}</text>\n                <i v-if=\"item.icon\" :class=\"['filter-icon', item.icon]\"></i>\n                <div v-else class=\"filter-icon\">\n                  <i class=\"iconfont up-fill\" v-if=\"currentIndex === index\">\n                    &#xeb6f;\n                  </i>\n                  <i class=\"iconfont\" v-else> &#xeb70; </i>\n                </div>\n              </template>\n            </div>\n          </div>\n        </div>\n        <!-- 弹出 -->\n        <div\n          class=\"down-ball\"\n          :class=\"{\n            'is-show': isShow,\n            'is-visible': isVisible,\n            'is-show-ball': isFixedTopBall\n          }\"\n        >\n          <div class=\"down-ball-popup\">\n            <div\n              class=\"down-ball-popup-content\"\n              :class=\"[\n                menuItem.type === 'down' ? 'down-ball-popup-content-down' : ''\n              ]\"\n            >\n              <template v-for=\"(item, index) in getMenuList\">\n                <template v-if=\"item.type === 'down' && index === currentIndex\">\n                  <slot v-if=\"item.popupSlot\" :name=\"popupName\"></slot>\n                  <down\n                    v-else\n                    :key=\"index\"\n                    :list=\"item\"\n                    :index=\"index\"\n                    @success=\"downSuccess\"\n                  />\n                </template>\n                <template\n                  v-else-if=\"item.type === 'filter' && index === currentIndex\"\n                >\n                  <slot v-if=\"item.popupSlot\" :name=\"popupName\"></slot>\n                  <msj-filter\n                    v-else\n                    :key=\"index\"\n                    :list=\"item\"\n                    :index=\"index\"\n                    @changeItem=\"changeItem\"\n                  >\n                  </msj-filter>\n                </template>\n              </template>\n            </div>\n            <template v-if=\"menuItem.type !== 'down'\">\n              <div\n                class=\"down-ball-popup-btn flex justify-between\"\n                v-if=\"isBtn\"\n              >\n                <button\n                  class=\"flex-1 resetting\"\n                  :hair-line=\"false\"\n                  ripple\n                  @click=\"handleResetting('resetMenu', true)\"\n                >\n                  重 置\n                </button>\n                <button\n                  class=\"flex-1 confirm\"\n                  type=\"primary\"\n                  ripple\n                  @click=\"confirm\"\n                >\n                  确 定\n                </button>\n              </div>\n            </template>\n          </div>\n          <div class=\"down-ball-mask\" @tap=\"handlePopupHide\"></div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 内容 -->\n    <div class=\"msj-down-content\" :class=\"fixedTop ? 'margin' : ''\">\n      <slot></slot>\n    </div>\n  </view>\n</template>\n<script>\nimport { deepClone } from './utils'\nimport down from './components/down'\nimport MsjFilter from './components/filter'\nexport default {\n  name: 'msj-down',\n  components: { down, MsjFilter },\n  mixins: [],\n  props: {\n    /**\n     * 导航菜单数据\n     */\n    menuList: {\n      type: Array,\n      default: () => []\n    },\n    /**\n     * 激活颜色\n     */\n    themeColor: {\n      type: String,\n      default: '#007aff'\n    },\n    /**\n     * 常规颜色\n     */\n    textColor: {\n      type: String,\n      default: '#000000'\n    },\n    /**\n     * 是否固定在顶部\n     */\n    fixedTop: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * 弹窗过渡时间\n     */\n    duration: {\n      type: [Number, String],\n      default: 300\n    },\n    /**\n     * 高度\n     */\n    height: {\n      type: [Number, String],\n      default: 80\n    },\n    /**\n     * 是否显示边框\n     */\n    border: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * 是否自定义样式\n     */\n    isGrow: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * 是否显示确认 重置 按钮\n     */\n    isBtn: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 字体大小\n     */\n    fontSize: {\n      type: String,\n      default: '14'\n    }\n  },\n  filters: {},\n  data() {\n    return {\n      createMargin: null,\n      currentIndex: -1,\n      popupName: '',\n      isShow: false,\n      isVisible: false,\n      menuItem: {},\n      isFixedTopBall: false, // 弹框弹出后 固定\n      marginFix: null,\n      resetMenu: null, // 重置数组 copy\n      newMenuCopy: null, //修改后的数据 备份\n      isNewMenu: false // 判断是否 修改成 上一次的数据 单项修改\n    }\n  },\n  computed: {\n    getMenuList() {\n      const allItem = {\n        label: '全部',\n        value: 'all'\n      }\n      const newMenu = deepClone(this.menuList || [])\n      // click 点击 只需要点击\n      // 数据\n      // {\n      //   title: '类型筛选', // 标题\n      //   type: 'click', // 类型\n      // }\n\n      // sort 排序\n      // value : asc desc\n\n      newMenu.forEach(item => {\n        if (item.type === 'sort') {\n          if (!item.value) {\n            item.value = 'asc'\n          }\n        } else if (item.type === 'down') {\n          // 是否是插槽 默认没有插槽\n          if (!item.popupSlot) {\n            if (!item.value) {\n              item.value = 'all'\n            }\n            // 没有插槽的情况 看是否有options\n            if (!item.options) {\n              item.options = []\n            }\n            if (item.isAll) {\n              item.options.unshift(allItem)\n            }\n          }\n        } else if (item.type === 'filter') {\n          // 是否是插槽 默认没有插槽\n          if (!item.popupSlot) {\n            if (!item.value) {\n              item.value = ['all']\n            }\n            // 没有插槽的情况 看是否有options\n            if (!item.options) {\n              item.options = []\n            }\n            item.options.forEach(filterItem => {\n              if (filterItem.isAll) {\n                filterItem.options.unshift(allItem)\n              }\n            })\n          }\n        }\n        // console.log(el, 'el')\n      })\n      this.resetMenu = JSON.parse(JSON.stringify(newMenu))\n      this.newMenuCopy = JSON.parse(JSON.stringify(newMenu))\n      return newMenu\n    },\n    /**\n     * 样式\n     */\n    downStyle() {\n      this.marginTopHanld()\n      return `\n        --down-theme-color: ${this.themeColor};\n        --down-text-color: ${this.textColor};\n        --down-popup-duration: ${this.duration / 1000}s;\n        --down-menu-height: ${this.height / 2 || 0}px;\n        --down-margin-top: ${this.createMargin}px;\n        --down-margin-top-fix: ${this.marginFix}px;\n        --down-font-size: ${this.fontSize}px;\n      `\n    }\n  },\n  watch: {},\n  mounted() {},\n  created() {},\n  methods: {\n    /**\n     * 获取系统信息高度\n     */\n    marginTopHanld() {\n      return this.$nextTick(() => {\n        const select = uni.createSelectorQuery().in(this)\n        select\n          .select('.msj-down .down')\n          .boundingClientRect(data => {\n            // 在这里可以获取到元素的信息，例如高度、宽度等\n            // console.log('元素的高度：', data)\n            if (data) {\n              // 在这里可以获取到元素的高度\n              this.marginFix = data.height\n            }\n          })\n          .exec()\n        if (this.fixedTop) {\n          select\n            .select('.msj-down .down')\n            .boundingClientRect(data => {\n              // 在这里可以获取到元素的信息，例如高度、宽度等\n              // console.log('元素的高度：', data)\n              if (data) {\n                // 在这里可以获取到元素的高度\n                this.createMargin = data.height\n              }\n            })\n            .exec()\n        } else {\n          select\n            .select('.msj-down .msj-down-header')\n            .boundingClientRect(data => {\n              // 在这里可以获取到元素的信息，例如高度、宽度等\n              // console.log('元素的高度：', data)\n              if (data) {\n                // 在这里可以获取到元素的高度\n                this.createMargin = data.height\n              }\n            })\n            .exec()\n        }\n\n        return this.createMargin || 0\n      })\n    },\n    /**\n     * 点击菜单\n     */\n    menuClick(item, index) {\n      this.menuItem = item\n      // 点击\n      if (item.type === 'click') {\n        this.handlePopupHide(1)\n        this.$emit(item.emit || 'click', item, index)\n        return true\n      } else if (item.type === 'sort') {\n        // 排序\n        this.handlePopupHide(1)\n        item.value = item.value === 'asc' ? 'desc' : 'asc'\n        this.$forceUpdate()\n        this.$emit(item.emit || 'sort', item, index)\n        return true\n      } else if (item.type === 'down') {\n        // console.log(item, 'item')\n        // 下拉\n        if (item.popupSlot) {\n          this.popupName = item.popupSlot\n          this.$emit(item.emit || 'down', item, index)\n        } else {\n          this.popupName = 'popupDown'\n          this.$emit(item.emit || 'down', item, index)\n        }\n        // console.log(this.popupName)\n        // $forceUpdate()\n      } else if (item.type === 'filter') {\n        if (item.popupSlot) {\n          this.popupName = item.popupSlot\n          this.$emit(item.emit || item.type, item, index)\n        } else {\n          this.popupName = 'popupFilter'\n          this.$emit(item.emit || item.type, item, index)\n        }\n        if (!item.emit) {\n          item.emit = item.type\n        }\n      }\n      this.handlePopupShow(index)\n      // console.log(2222, item)\n    },\n\n    /**\n     * 确定\n     */\n    confirm() {\n      this.newMenuCopy[this.currentIndex] = JSON.parse(\n        JSON.stringify(this.getMenuList[this.currentIndex])\n      )\n      this.isNewMenu = true // 不重置\n      this.handlePopupHide()\n\n      this.$emit('confirm', this.menuItem, this.currentIndex)\n      if (this.menuItem.type === 'filter') {\n        let data = {}\n        this.menuItem.options.forEach(item => {\n          data[item.type] = []\n        })\n\n        console.log('🚀 ~ file: msj-down.vue:453 ~ confirm ~ data:', data)\n        this.$emit(this.menuItem.emit, this.menuItem, this.currentIndex)\n      }\n    },\n\n    /**\n     * 重置\n     */\n    handleResetting(name, isReset) {\n      // console.log(name, isReset)\n      this.getMenuList[this.currentIndex] = JSON.parse(\n        JSON.stringify(this[name][this.currentIndex])\n      )\n      if (!!isReset) {\n        this.newMenuCopy[this.currentIndex] = JSON.parse(\n          JSON.stringify(this.getMenuList[this.currentIndex])\n        )\n        this.$emit('resetting')\n      }\n      this.$forceUpdate()\n    },\n    /**\n     * 打开弹窗\n     * @param index 当前激活索引\n     */\n    handlePopupShow(index) {\n      this.isShow = true\n      this.isVisible = true\n      this.currentIndex = index\n      this.isFixedTopBall = true\n      this.$emit('open', this.currentIndex)\n    },\n    /**\n     * 关闭弹窗\n     */\n    handlePopupHide(duration) {\n      this.isShow = false\n      this.isFixedTopBall = false\n\n      // 延迟移除下拉弹窗\n      setTimeout(\n        () => {\n          if (!this.isNewMenu) {\n            this.handleResetting('newMenuCopy', false)\n          }\n          this.currentIndex = -1\n          this.isVisible = false\n          this.isNewMenu = false\n          // this.getMenuList.forEach(item => {\n          //   item.isActived = false\n          // })\n        },\n        typeof duration === 'number' ? duration : this.duration\n      )\n      this.$emit('close', this.currentIndex)\n    },\n    /**\n     * 菜单项-下拉列表回调\n     * @param value 操作返回的数据\n     * @param item 下拉列表项数据\n     * @param itemIndex 下拉列表项索引\n     * @param index 菜单索引\n     */\n    downSuccess(value, item, itemIndex, index) {\n      let itemList = this.getMenuList[index]\n      itemList.value = value // 更改值\n      this.newMenuCopy[index] = this.getMenuList[index]\n      this.isNewMenu = true // 不重置\n      this.$forceUpdate()\n      this.$emit(\n        item.emitConfim || 'downConfirm',\n        value,\n        item,\n        itemIndex,\n        index\n      )\n      this.handlePopupHide()\n    },\n    /**\n     *\n     * @param {*} item 当前项\n     * @param {*} index 索引\n     * @param {*} menuIndex 类型索引\n     */\n    changeItem(item, index, menuIndex) {\n      console.log(\n        '🚀 ~ file: msj-down.vue:523 ~ changeItem ~ item, index, menuIndex:',\n        item,\n        index,\n        menuIndex\n      )\n      this.getMenuList[menuIndex].options[index] = item\n    }\n  }\n}\n</script>\n<style lang='scss' scoped>\n@import './common.scss';\n\n.msj-down {\n  --icon-mr-left: 10rpx;\n  position: relative;\n  z-index: 900;\n  width: 100%;\n  background-color: #fff;\n  .down {\n    &.is-fixed {\n      position: fixed;\n      top: var(--window-top, 0px);\n      right: 0;\n      left: 0;\n      z-index: 910;\n      display: block;\n      height: auto;\n      background-color: #fff;\n    }\n\n    &-menu {\n      position: relative;\n      z-index: 920;\n      height: var(--down-menu-height, 0px);\n      display: flex;\n      align-items: center;\n      box-shadow: 0 1rpx 0 0 #ececec;\n      color: var(--down-text-color);\n      &-item {\n        display: flex;\n        align-items: center;\n        height: 100%;\n        padding: 0 20rpx;\n        &.is-actived {\n          color: var(--down-theme-color);\n        }\n        &.each {\n          flex-grow: 1;\n        }\n        &.border {\n          border-right: 1px solid #ececec;\n        }\n        &-click,\n        &-down,\n        &-filter {\n          display: flex;\n          align-items: center;\n          // width: 100%;\n          // height: 100%;\n          font-size: var(--down-font-size);\n          .click-icon,\n          .down-icon,\n          .filter-icon {\n            margin-left: var(--icon-mr-left);\n          }\n        }\n        &-sort {\n          font-size: var(--down-font-size);\n          .sort-icon {\n            margin-left: var(--icon-mr-left);\n            u-icon {\n              display: flex;\n            }\n          }\n          .is-actived-sort-icon {\n            &-up,\n            &-down {\n              .up-fill,\n              .down-fill {\n                color: $tips-color;\n              }\n            }\n            &-up {\n              .up-fill {\n                color: var(--down-theme-color);\n              }\n            }\n            &-down {\n              .down-fill {\n                color: var(--down-theme-color);\n              }\n            }\n          }\n        }\n        &-down {\n          .down-icon {\n            margin-left: var(--icon-mr-left);\n            u-icon {\n              display: flex;\n              color: $tips-color;\n            }\n            .up-fill {\n              color: var(--down-theme-color);\n            }\n          }\n        }\n      }\n    }\n\n    &-ball {\n      position: absolute;\n      top: var(--down-margin-top);\n      bottom: 0;\n      left: 0;\n      z-index: -1;\n      width: 100%;\n      z-index: 930;\n      overflow: hidden;\n      // opacity: 0;\n      visibility: hidden;\n      height: calc(100vh - var(--down-menu-height, 0px));\n      z-index: 901;\n\n      &.is-show {\n        .down-ball-popup {\n          transform: translateY(0);\n        }\n      }\n\n      &.is-show-ball {\n        top: var(--down-margin-top-fix);\n      }\n      &.is-visible {\n        // opacity: 1;\n        visibility: visible;\n      }\n      &-popup {\n        position: relative;\n        z-index: 10;\n        max-height: 100%;\n        overflow: auto;\n        transform: translateY(-120%);\n        transition: transform var(--down-popup-duration) linear,\n          -webkit-transform var(--down-popup-duration) linear;\n        &-content {\n          padding: 20rpx;\n          background-color: #fff;\n          &-down {\n            padding: 0;\n          }\n        }\n        &-btn {\n          background-color: #fff;\n          padding: 20rpx 20rpx;\n          // :deep(button) {\n          //   // border-radius: 5px;\n          // }\n          .resetting,\n          .confirm {\n            margin-right: 30rpx;\n            padding: 14rpx 0;\n            line-height: inherit;\n            border-radius: 35rpx;\n          }\n          .confirm {\n            color: #fff;\n            background-color: var(--down-theme-color);\n          }\n\n          .resetting {\n            background-color: #ffffff;\n            border: 1px solid var(--down-theme-color);\n            color: var(--down-theme-color);\n          }\n        }\n      }\n\n      &-mask {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        z-index: 9;\n        width: 100%;\n        background-color: rgba(0, 0, 0, 0.6);\n      }\n    }\n  }\n  &-content {\n    &.margin {\n      margin-top: calc(var(--down-margin-top));\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./msj-down.vue?vue&type=style&index=0&id=23f1f265&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./msj-down.vue?vue&type=style&index=0&id=23f1f265&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1694506437057\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}